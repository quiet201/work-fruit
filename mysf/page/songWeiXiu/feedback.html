<!DOCTYPE html>
<html>
 <head> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" /> 
  <title>意见反馈</title> 
  <link rel="stylesheet" href="css/style.css" /> 
 </head> 
 <body> 
  <div class="wrap"> 
   <header> 
    <div class="row hbg-gray"> 
     <a href="javascript: history.go(-1);"><i class="btn btn-top">&nbsp;</i> <h1>意见反馈</h1> </a> 
    </div> 
   </header> 
   <div class="row content" id="feedback-content"> 
    <div class="feedback" id="cos-type"> 
     <ul class="ui-dw6 feedback-ul c" style="margin-top:0;"> 
      <li class="list-select c50" style="margin-top:13px;"> <a class="ui-btn btn-fk">报修流程</a> </li> 
      <li class="list-select c50"> <a class="ui-btn btn-fk">维修人员</a> </li> 
     </ul> 
     <ul class="feedback-ul c"> 
      <li class="list-select c50" style="margin-top:13px;"> <a class="ui-btn btn-fk">维修过程</a> </li> 
      <li class="list-select c50"> <a class="ui-btn btn-fk">收费事项</a> </li> 
     </ul> 
     <ul class="feedback-ul c"> 
      <li class="list-select c50" style="margin-top:13px;"> <a class="ui-btn btn-fk">其它</a> </li> 
     </ul> 
     <ul class="ui-dw bordert" style="margin-top:0;"> 
      <li class="vcc wrap-txtarea"> <textarea class="txt-area" id="cosContext" maxlength="300" placeholder="感谢反馈，请留下您的宝贵问题或意见" cols="200" rows="8"></textarea> </li> 
     </ul> 
    </div> 
   </div> 
  </div> 
  <div class="hbg-fff"> 
   <div class="grid-btn"> 
    <a class="ui-btn btn-submit" id="submit-feedback" style="margin-top:0;">提交</a> 
   </div> 
  </div> 
  <p class="tc fz13">客服热线 <span class="red"> 400888888</span></p>  
  <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script> 
  <script type="text/javascript">
  (function($){
      $.fn.alert = function(op) {   
        defaultop = {
            title:"提示",
            butClose:"我知道了"
        };
        op = $.extend(defaultop,op);
        var template = [];
        template.push('<div class="row mask">');
          template.push('<div class="iframe-wx">');
              template.push('<div class="msg-wx" style="margin-left:-135px;margin-top:-28px;">');
                template.push('<p class="art-msg">'+op['title']+'</p>');
                template.push('<p class="c-msg">'+op['content']+'</p>');
                template.push('<p class="c-msgr"><a data-bind="close">'+op['butClose']+'</a></p>');
              template.push('</div>');
          template.push('</div>');
         template.push('</div>');
         $(this).append(template.join(""));
         $(this).find("a[data-bind='close']").click(function(){
           $(this).parents("div.mask").remove();
         });
      };
    })(window.jQuery);
  
  $(function($){
    $feedbackContent = $("#feedback-content");
    var $cosType = $("#cos-type"),
        $cosTypeAll = $cosType.find("a.ui-btn");
    $cosTypeAll.click(function(){
      $cosTypeAll.each(function(i){
        $(this).removeClass("btn-fking");
      });
      $(this).addClass("btn-fking");
    });
    
    $("#submit-feedback").click(function(){
        var cosType = $cosType.find("a.btn-fking").text();
        if(!cosType){
          $feedbackContent.alert({content:"请选择反馈类型！"});
          return;
        }
        var cosContext = $("#cosContext").val();
        if(!cosContext){
          $feedbackContent.alert({content:"请反馈内容！"});
          return;
        }
        //提交Ajax
        $.post("/service/songweixiu/private/feedback/insert", { cosType: cosType,cosContext: cosContext },function(result){
          if(result){
            if(result["returnCode"] == 200){
              $feedbackContent.alert({content:"请求成功"});
            }else{
              $feedbackContent.alert({content:result["returnMesg"]});
            }
          }
        },"json");
    });
  });
</script>   
 </body>
</html>