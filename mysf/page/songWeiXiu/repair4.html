<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>手机维修</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/sf03.css">
<link rel="stylesheet" href="css/tips.css">
<script src="js/jquery-1.9.1.min.js"></script>
<!-- <script type="text/javascript" src="js/jquery.extension.js"></script> -->
<script src="/js/common/util/util.js"></script>
<script src="js/songweixiuUtil.js"></script>
<script src="js/aMessage.js"></script>
<script  type="text/javascript">
var songWeiXiuAddressInfo = "songWeiXiuAddressInfo";
$(document).ready(function(){
		
	//初始化加载地址信息
	fillAddress();	
});


function toSelectDestination(flag){
	saveInfoToCookie(flag);
	getAddressDetail('/page/common/address/province.html?addrName=destName&addrCode=destCode&addrCountyName=dcountyName&addrCountyCode=dcountyCode&type=3&gatChild=-1');
}
function saveInfoToCookie(flag){
	var obj={};	
	obj.flag = flag;
	obj.senderName =  $("#id_input_senderName").val();
	obj.senderPhone =  $("#id_input_senderPhone").val();
	obj.senderProvinceName = $("#id_input_senderProvinceName").val();
	obj.senderProvinceCode = $("#id_input_senderProvinceCode").val();
	obj.senderCityName = $("#id_input_senderCityName").val();
	obj.senderCityCode = $("#id_input_senderCityCode").val();
	obj.senderCountyName = $("#id_input_senderCountyName").val();
	obj.senderCountyCode = $("#id_input_senderCountyCode").val();
	obj.senderAddress = $("#id_input_senderAddress").val();
	obj.senderDestination = $("#id_textarea_senderDestination").val();

	obj.recipientName =  $("#id_input_recipientName").val();
	obj.recipientPhone =  $("#id_input_recipientPhone").val();
	obj.recipientProvinceName = $("#id_input_recipientProvinceName").val();
	obj.recipientProvinceCode = $("#id_input_recipientProvinceCode").val();
	obj.recipientCityName = $("#id_input_recipientCityName").val();
	obj.recipientCityCode = $("#id_input_recipientCityCode").val();
	obj.recipientCountyName = $("#id_input_recipientCountyName").val();
	obj.recipientCountyCode = $("#id_input_recipientCountyCode").val();
	obj.recipientAddress = $("#id_input_recipientAddress").val();	
	obj.recipientDestination = $("#id_textarea_recipientDestination").val();
	

	obj.billHeader =  $("#id_textarea_billHeader").val();	
	obj.bill =  $("#id_input_product_modify_bill").val();
	
	setCookie(songWeiXiuAddressInfo,JSON.stringify(obj));
}
function fillInfoFromCookie(){
	 var obj = $.parseJSON(getCookie(songWeiXiuAddressInfo));
	 $("#id_input_senderName").val(obj.senderName);
	 $("#id_input_senderPhone").val(obj.senderPhone);
	 $("#id_input_senderProvinceName").val(obj.senderProvinceName);
	 $("#id_input_senderProvinceCode").val(obj.senderProvinceCode);
	 $("#id_input_senderCityName").val(obj.senderCityName);
	 $("#id_input_senderCityCode").val(obj.senderCityCode );
	 $("#id_input_senderCountyName").val(obj.senderCountyName);
	 $("#id_input_senderCountyCode").val(obj.senderCountyCode);
	 $("#id_input_senderAddress").val(obj.senderAddress);
	 $("#id_textarea_senderDestination").val(obj.senderDestination);

	 $("#id_input_recipientName").val(obj.recipientName);
	 $("#id_input_recipientPhone").val(obj.recipientPhone);
	 $("#id_input_recipientProvinceName").val(obj.recipientProvinceName);
	 $("#id_input_recipientProvinceCode").val(obj.recipientProvinceCode);
	 $("#id_input_recipientCityName").val(obj.recipientCityName);
	 $("#id_input_recipientCityCode").val(obj.recipientCityCode );
	 $("#id_input_recipientCountyName").val(obj.recipientCountyName);
	 $("#id_input_recipientCountyCode").val(obj.recipientCountyCode);
	 $("#id_input_recipientAddress").val(obj.recipientAddress);
	 $("#id_textarea_recipientDestination").val(obj.recipientDestination);

	 $("#id_textarea_billHeader").val(obj.billHeader);
	 $("#id_input_product_modify_bill").val(obj.bill);
	 if(obj.bill==1){
	 	$("#id_span_modify_bill_yes").click();
	 }else{
	 	$("#id_span_modify_bill_no").click();
	 }
	 return obj;
}

//填充寄件人信息
function fillAddress(){
	var provinceName = getUrlValueByKey("proName");//省份名称
	if(!provinceName){
		return;
	}
	var provinceCode = getUrlValueByKey("proCode");//省份编码
	var cityName = getUrlValueByKey("destName");//城市名称
	var cityCode = getUrlValueByKey("destCode");//城市编码
	var contyName = getUrlValueByKey("dcountyName");//区县名称
	var contyCode = getUrlValueByKey("dcountyCode");//区县编码
	var destination = fillNull(getUrlValueByKey("proName")) + " "
	+ fillNull(getUrlValueByKey("destName")) + " "
	+ fillNull(getUrlValueByKey("dcountyName"));
	
	//先还原数据
	var obj = fillInfoFromCookie();
	if(obj.flag=="sender"){
		//设置隐藏域信息
		$("#id_input_senderProvinceName").val(provinceName);
		$("#id_input_senderProvinceCode").val(provinceCode);
		$("#id_input_senderCityName").val(cityName);
		$("#id_input_senderCityCode").val(cityCode);
		$("#id_input_senderCountyName").val(contyName);
		$("#id_input_senderCountyCode").val(contyCode);
		$("#id_input_senderAddress").val(destination);
	}else{
		$("#id_input_recipientProvinceName").val(provinceName);
		$("#id_input_recipientProvinceCode").val(provinceCode);
		$("#id_input_recipientCityName").val(cityName);
		$("#id_input_recipientCityCode").val(cityCode);
		$("#id_input_recipientCountyName").val(contyName);
		$("#id_input_recipientCountyCode").val(contyCode);
		$("#id_input_recipientAddress").val(destination);
	}
}
function showDiv(_this){
	var checked = _this.checked;
	if(checked){
		$("#id_div_recipientInfo").attr("style","display:none");
	}else{
		$("#id_div_recipientInfo").attr("style","display:block");
	}
}

function checkedAgreement(_this,tagerId){
	var checked = _this.checked;
	if(checked){
		$(_this).attr("class","check-active");
		$(tagerId).addClass("btn-submit");
	}else{
		$(_this).attr("class","check-a");
		$(tagerId).removeClass("btn-submit");
	}
}

function submitOrderInfo(){
	var checked = document.getElementById("id_checkbox_Agreement").checked;
	if(false==checked){
		alert("请勾选同意顺维修维修产品协议！");
		return;
	}
	
	var obj={};	
	//obj.flag = flag;
	obj.customname =  $("#id_input_senderName").val();
	if(!obj.customname){
		alert("请填写寄件人姓名！！");
		return;
	}
	obj.custommobile =  $("#id_input_senderPhone").val();
	if(!obj.custommobile){
		alert("请填写寄件人电话号码！！");
		return;
	}
	obj.customprovince = $("#id_input_senderProvinceName").val();
	//obj.customcity = $("#id_input_senderProvinceCode").val();
	obj.customcity = $("#id_input_senderCityName").val();
	//obj.senderCityCode = $("#id_input_senderCityCode").val();
	//obj.senderCountyName = $("#id_input_senderCountyName").val();
	//obj.senderCountyCode = $("#id_input_senderCountyCode").val();
	obj.customarea = $("#id_input_senderAddress").val();
	if(!obj.customarea){
		alert("请选择寄件人省市区！");
		return;
	}
	obj.customaddr = $("#id_textarea_senderDestination").val();
	if(!obj.customaddr){
		alert("请填写寄件人详细地址");
		return;
	}
	var checked = document.getElementById("checkbox_c2").checked;
	if(checked==true){
		obj.customname2 =  obj.customname;
		obj.custommobile2 =  obj.custommobile;
		obj.customprovince2 = obj.customprovince;
		obj.customcity2 = obj.customcity;
		obj.customarea2 = obj.customarea;
		obj.customaddr2 = obj.customaddr;
	}else{
		obj.customname2 =  $("#id_input_recipientName").val();
		if(!obj.customname2){
			alert("请填写收件人姓名！");
			return;
		}
		obj.custommobile2 =  $("#id_input_recipientPhone").val();
		if(!obj.custommobile2){
			alert("请填写收件人电话号码！");
			return;
		}		
		obj.customprovince2 = $("#id_input_recipientProvinceName").val();
		//obj.recipientProvinceCode = $("#id_input_recipientProvinceCode").val();
		obj.customcity2 = $("#id_input_recipientCityName").val();
		//obj.recipientCityCode = $("#id_input_recipientCityCode").val();
		//obj.recipientCountyName = $("#id_input_recipientCountyName").val();
		//obj.recipientCountyCode = $("#id_input_recipientCountyCode").val();
		obj.customarea2 = $("#id_input_recipientAddress").val();	
		if(!obj.customarea2){
			alert("请填写收件人地址！");
			return;
		}		
		obj.customaddr2 = $("#id_textarea_recipientDestination").val();
		if(!obj.customaddr2){
			alert("请填写收件人详细地址！");
			return;
		}		
	}
	
	obj.invoicetitle =  $("#id_textarea_billHeader").val();
	obj.needinvoice =  $("#id_input_product_modify_bill").val();
	if(obj.needinvoice==1){
		if(!obj.invoicetitle){
			alert("请填写发票头部信息！");
			return;
		}
	}
	
	
	$.ajax({
		type : "POST",
		dataType : "json",
		data : obj,
		url : "/service/songweixiu/sfWxOrder/saveOrderInfoToDB.action",
		contentType : 'application/x-www-form-urlencoded; charset=utf-8',
		success : function(json) {
		    if(json.result=="success"){
		    	var orderNo = json.orderNo;
		    	//window.location.href="order-submit-success.html?orderNo=SEQ201510231131001";
		    	window.location.href="order-submit-success.html?orderNo="+orderNo;
		    }else{
		    	if(json.msg){
		    		alert(json.msg);
		    	}else{
		    		alert("订单保存失败，服务器异常，请稍后重试！");
		    	}
		    	
		    }
		},
		error : function(XMLHttpRequest, textStatus, errorThrown) {
			// alert("服务器连接失败");
		}
	});
}
</script>
</head>

<body>
<div class="wrap">
  <header>
    <div class="row"> <a href="javascript: history.go(-1);"><i class="btn btn-top">&nbsp;</i>
      <h1>手机维修</h1>
      </a> </div>
  </header>
  <div class="row repair btg">
    <div class="repair-list">
      <div class="itemi"><i class="open">&nbsp;</i><span class="dw3">维修人信息</span></div>
      <!--产品维修信息c s-->
      <div class="itemi-c">
        <div class="info-contact">
          <div class="itemi01" style="border-top:0;"><a href="#"><span class="btn-line-gray right">使用地址薄</span></a><i class="write-info">&nbsp;</i>请填写您或者朋友的信息
            <div class="info-ad">
              <div class="ui-dw1 bordert">
                <div class="contact-ad">
                  <ul class="ui-dw1" style="margin-top:0;">
                    <li class="item1">
                      <label>姓名</label>
                      <input id="id_input_senderName" class="dw6" type="text">
                    </li>
                    <li class="item1">
                      <label>手机号码</label>
                      <input id="id_input_senderPhone" class="dw6" type="tel">
                    </li>
                    <li class="item1">
                      <label>省、市、区</label>
                      <a href="javascript:void(0)" onclick="toSelectDestination('sender')"> <i class="arrow-r"></i>
                      <input id="id_input_senderAddress" class="dw6 pl11 input-text" type="text" placeholder="请选择地区">
                      </a>
                      <input type="hidden" id="id_input_senderProvinceName"/>
                      <input type="hidden" id="id_input_senderProvinceCode"/>
                      <input type="hidden" id="id_input_senderCityName"/>
                      <input type="hidden" id="id_input_senderCityCode"/>
                      <input type="hidden" id="id_input_senderCountyName"/>
                      <input type="hidden" id="id_input_senderCountyCode"/>
                    </li>
                    <div class="item-area mt10">
                      <div class="item-label1">
                        <label>详细地址:</label>
                      </div>
                    
                        <textarea id="id_textarea_senderDestination" class="txt-area4" cols="30" rows="3" style="border:none;"></textarea>
                   
                    </div>
                    <div class="itemsum" style="border-top:none;"> 默认为收货地址
                      <div class="flex-con1">
                        <input id="checkbox_c2" class="chk_3" type="checkbox" checked="true" onclick="showDiv(this);">
                        <label for="checkbox_c2"></label>
                      </div>
                    </div>
                    
                    <!--默认寄件地址s-->
                    
                    <div id="id_div_recipientInfo" class="contact-ad" style="display:none">
                      <ul class="ui-dw2" style="margin-top:0;">
                        <li class="item1">
                          <label>姓名</label>
                          <input id="id_input_recipientName" class="dw6" type="text">
                        </li>
                        <li class="item1">
                          <label>手机号码</label>
                          <input id="id_input_recipientPhone"  class="dw6" type="tel">
                        </li>
                        <li class="item1">
                          <label>省、市、区</label>
                          <a href="javascript:void(0)" onclick="toSelectDestination('recipient')"><i class="arrow-r"></i>
                          <input id="id_input_recipientAddress" class="dw6 pl11 input-text" type="text" placeholder="请选择地区">
                          </a>
                          <input type="hidden" id="id_input_recipientProvinceName"/>
                          <input type="hidden" id="id_input_recipientProvinceCode"/>
                          <input type="hidden" id="id_input_recipientCityName"/>
                          <input type="hidden" id="id_input_recipientCityCode"/>
                          <input type="hidden" id="id_input_recipientCountyName"/>
                          <input type="hidden" id="id_input_recipientCountyCode"/>
                        </li>
                        <li class="item-area mt10">
                          <div class="item-label1">
                            <label>详细地址</label>
                          </div>
                          <textarea  id="id_input_recipientDestination"  class="txt-area1" cols="30" rows="2" style="border:none;"></textarea>
                        </li>
                      </ul>
                    </div>
                    
                    <!--默认寄件地e-->
                    
                    <div class="grid-gray bordert">
                      <div class="item-d"> <span class="fp-text">是否需要发票</span>
                        <input id="id_input_product_modify_bill" type="hidden" value="1" />
                        <div class="fp-label"> <span id="id_span_modify_bill_yes" name="name_span_modify_bill" onclick="makeSureClick(this, true,'id_input_product_modify_bill',1)" class="check-active"></span>
                          <label>是</label>
                        </div>
                        <div class="fp-label"> <span id="id_span_modify_bill_no" name="name_span_modify_bill" onclick="makeSureClick(this, true,'id_input_product_modify_bill',0)" class="check-a"></span>
                          <label>否</label>
                        </div>
                      </div>
                      <div class="hbg-fff">
                        <textarea id="id_textarea_billHeader" class="txt-area2 mt10 ml10" placeholder="请填写发票抬头信息" rows="2" cols="25"></textarea>
                      </div>
                    </div>
                    <div class="grid-gray1">
                      <div class="itemi1 bordert"> <a>
                        <input id="id_checkbox_Agreement" class="check-a" type="checkbox" checked="false" onclick="checkedAgreement(this,'#submitOrderInfo');" />
                        </a> 
                        <!--check-a 是未勾选 ，check-active为选中 -->
                        <div class="dw4">我已阅读<a href="#"><span class="red1" onclick="showClause()">《顺维修维修产品协议》</span></a></div>
                      </div>
                      <div class="grid-btn"> <a class="ui-btn btn-cancel" id="submitOrderInfo" onclick="submitOrderInfo()">提交信息</a> </div>
                    </div>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!--产品维修信息e--> 
    
  </div>
</div>

<!--弹出产品协议内容s-->
<div id="light1"  hidden="false">
  <center>
    <h4>《快件运单契约条款》</h4>
  </center>
  <h1>服务协议</h1>
  <h2>为了使用更改收货地址服务，您应当事先阅读并同时遵守以下条款：</h2>
  <h2>一、定义</h2>
  <h2>更改收货地址服务是指快件派送前，收件人本人可以在顺丰速运无线服务渠道提交更改收货地址请求，请求有效的情况下我司安排地址变更服务。
    请求有效符合以下三个条件：收件人提交的信息准确真实、客服处理请求时快件未出仓、寄件人同意收件人请求。以上条件若有一条不符，均会导致服务使用失败。
    您提交的信息中，如顺丰速运公司发现或有合理理由怀疑您提供的身份信息不合法、不真实、不准确、不完整，顺丰速运公司有权立即终止向您提供服务，并拒绝您现在或未来使用顺丰速运服务窗全部或部分功能，由此给您造成的任何损失及产生的额外费用由您自行承担。 </h2>
  <h2>二、服务功能</h2>
  <h2>1、服务请求功能：快件运输途中，您可以在顺丰速运无线服务渠道提交更改收货信息请求，提交信息有效情况下，顺丰速运会及时为您处理，处理结果（更改收货地址成功或失败）通过顺丰速运服务窗通知您，处理结果成功即为生效。<br>
    2、收货联系方式更改生效后再次更改（目前该功能暂不开放）：如您在更改申请提交成功后，需要再次更改，请再次提交变更信息，顺丰速运会以您的最新申请为准。 </h2>
  <h2>三、服务范围</h2>
  <h2>顺丰速运无线服务渠道暂支持北上广深四个城市（快件原目的地为北上广深）的更改收货地址请求，后续开放城市以顺丰速运发布信息为准。 </h2>
  <h2>四、费用</h2>
  <h2>顺丰速运服务窗暂提供一次更改收货地址服务。后续将按次数收取服务费，服务费金额以顺丰速运发布信息为准。<br>
    非同城更改收货地址的请求，将重新开单，新单服务类型默认与原单一致，运费计算标准与原单一致。暂不含代收货款件。 </h2>
  <h2>五、托寄物要求</h2>
  <h2>计费重量≤3kg。 </h2>
  <h2>六、服务时效</h2>
  <h2>更改收货联系方式信息提交成功后，顺丰客服会在1个小时内为您处理。处理结果、快件最新路由将通过顺丰速运无线渠道告知您。 </h2>
  <h2>七、不可抗力及其他免责事由</h2>
  <h2> 1.在使用顺丰速运公司提供的更改收货地址服务过程中，可能遇到不可抗力等风险因素，使服
    发生中断。不可抗力是指不能预见、不能克服、不能避免且对一方或双方造成重大影响的客观事件，包括但
    不限于洪水、地震、瘟疫和风暴等自然灾害以及战争、动乱、政府行为等社会事件。出现上述情况时，顺丰
    速运将努力在第一时间与相关单位配合及时进行修复，但由此给您造成的损失顺丰速运有限公司在法律允许的范围内免责。<br>
    2.在法律允许的范围内，顺丰速运公司对以下情形导致的服务中断或受阻不承担责任：<br>
    （1）受到手机、电脑病毒、木马或其他恶意程序、黑客攻击的破坏；<br>
    （2）用户或顺丰速运有限公司的电脑软件、系统、硬件和通信线路出现故障；<br>
    （3）用户操作不当；<br>
    （4）其他顺丰速运公司无法控制或合理预见的情形。<br>
  </h2>
</div>
<!--弹出产品协议内容e-->





 <!--到个人中心的图标 -->
 <div class="i-info"><a href="index1.html"><i class="icon-home-fixed">&nbsp;</i></a></div>
 
 </body>
</html>
