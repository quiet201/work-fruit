<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<title>申请信息</title>
<link rel="stylesheet" href="css/public.css">
<script type="text/javascript" src="/js/common/jquery-1.7.2.min.js"></script>
<script src="/js/common/util/util.js"></script>
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/advancePayment.js"></script>
<script src="/page/onlineRetailers/printer/js/util.js"></script>
<script  type="text/javascript">
var userSession = "advancePaymentUserInfo";
$(document).ready(function(){
	if(getUrlValueByKey("type")=="modify"){
		//$("#id").val(getUrlValueByKey("id"));
		$("#monthCard").attr("readonly","readonly");
		fillAdvancePaymentCusInfo();
	}
	
	//初始化加载地址信息
	fillAddress();	
});


function toSelectDestination(){
	saveInfoToCookie();
	getAddressDetail('../../common/address/province.html?addrName=destName&addrCode=destCode&addrCountyName=dcountyName&addrCountyCode=dcountyCode&type=3&gatChild=-1');
}
function saveInfoToCookie(){
	var obj={};	
	obj.id = $("#id").val();
	obj.status = $("#status").val();
	obj.monthCard = $("#monthCard").val();
	obj.linkMan = $("#linkMan").val();
	obj.phone = $("#phone").val();
	obj.email = $("#email").val();
	obj.qq = $("#qq").val();
	obj.provinceName = $("#provinceName").val();
	obj.provinceCode = $("#provinceCode").val();
	obj.cityName = $("#cityName").val();
	obj.cityCode = $("#cityCode").val();
	obj.countyName = $("#countyName").val();
	obj.countyCode = $("#countyCode").val();
	obj.address = $("#address").val();	
	obj.destination = $("#destination").text();
	//alert(JSON.stringify(obj));
	setCookie(userSession,JSON.stringify(obj));
}
function fillInfoFromCookie(){
	 var obj = $.parseJSON(getCookie(userSession));
	 //alert("getCookie(userSession)="+obj);
	 //alert("obj.monthCard="+obj.monthCard);
	 $("#id").val(obj.id);
	 $("#status").val(obj.status);
	 $("#monthCard").val(obj.monthCard);
	 $("#linkMan").val(obj.linkMan);
	 $("#phone").val(obj.phone);
	 if(obj.email){
		 $("#email").val(obj.email);
	 }
	 $("#qq").val(obj.qq);
	 $("#provinceName").val(obj.provinceName);
	 $("#provinceCode").val(obj.provinceCode);
	 $("#cityName").val(obj.cityName);
	 $("#cityCode").val(obj.cityCode );
	 $("#countyName").val(obj.countyName);
	 $("#countyCode").val(obj.countyCode);
	 $("#address").val(obj.address);	
	 $("#destination").text(obj.destination);
}

//填充寄件人信息
function fillAddress(){
	var provinceName = getUrlValueByKey("proName");//省份名称
	if(!provinceName){
		return;
	}
	var provinceCode = getUrlValueByKey("proCode");//省份编码
	var cityName = getUrlValueByKey("destName");//城市名称
	var cityCode = getUrlValueByKey("destCode");//城市编码
	var contyName = getUrlValueByKey("dcountyName");//区县名称
	var contyCode = getUrlValueByKey("dcountyCode");//区县编码
	var destination = fillNull(getUrlValueByKey("proName")) + " "
	+ fillNull(getUrlValueByKey("destName")) + " "
	+ fillNull(getUrlValueByKey("dcountyName"));
	
	//先还原数据
	fillInfoFromCookie();

	//设置隐藏域信息
	$("#provinceName").val(provinceName);
	$("#provinceCode").val(provinceCode);
	$("#cityName").val(cityName);
	$("#cityCode").val(cityCode);
	$("#countyName").val(contyName);
	$("#countyCode").val(contyCode);
	$("#destination").text(destination);
	
}

function clearPhone(){
	$('#phone').val('');
}


//服务条款点击事件
function makeSureClick(){
	var makeSure = $('#makeSure').attr('class');
	if('ui-ico-sfi ico-box'==makeSure){
		$('#makeSure').attr('class','ui-ico-sfi ico-yes2');
	}else{
		$('#makeSure').attr('class','ui-ico-sfi ico-box');
	}
}
</script>
</head>

<body>
 <div id="wrapper">
	 <input type="hidden" id="id"/>
    <!-- header s -->
    <!--<header class="bgcolor03">
    	<a class="ui-btn btn-back" href="javascript: history.go(-1);">
        <span class="btn-topl"><i class="ui-ico-sfi ico-back color01"></i></span>
        <h1 class="color01">申请信息</h1>
        </a>
    </header>-->
     <!-- header e -->
    
    <section >
    	<ul class="ui-banner">
        	<li><img src="img/ad_banner.png"></li>
            
            
        </ul>
    </section>     
    
    <section>
    	<ul class="ui-fm">       	
        	<li class="item">  
        		<span>为了您能成功申领，请填写以下信息：</span>
        	</li> 
        </ul>
        <ul class="ui-must-text">
        	<li class="">  
        		<span>（*为必填信息）</span>
        	</li> 
        </ul>	                     
        
    </section>
    <form>
    	<section>
    		<ul class="ui-fm border-top0">
    		<li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><span class="must2"></span><label><span class="lable-fontStyle">月结卡号</span></label></div>
                    <div class="flex-con">
                    	<input id="monthCard" type="tel" name="" class="input-text" value="" placeholder="" onblur="checkCustomerCardNumber(this)" onkeyup="checkCustomerCardValid(this)" />
                    </div>
                    <!-- <div class="ico_right"></div> -->
                </div>
            </li>
            <li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><span class="must2"></span><label><span  class="lable-fontStyle">联系人姓名</span></label></div>
                    <div class="flex-con">
                    	<input id="linkMan" type="text" name="" class="input-text" value="" placeholder="" />
                    </div>
                </div>
            </li>
            <li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><span class="must2"></span><label><span class="lable-fontStyle">手机号码</span></label></div>
                    <div class="flex-con">
                    	<input id="phone" type="tel" name="" class="input-text" value="" placeholder="" onblur="checkPhone(this)" onkeyup="checkPhoneIsAllNumber(this)"/>
                    </div>
                    <!--  <a href="javascript:void(0)" onclick="clearPhone()"><div class="ico_wrong"></div></a>-->
                </div>
            </li>
           </ul>
           
           <ul class="ui-fm grid-main">
    		<li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><label><span class="lable-fontStyle">邮箱地址</span></label></div>
                    <div class="flex-con">
                    	<input id="email" type="text" name="" class="input-text" value="" placeholder="了解PBS业务请填写此项" />
                    </div>
                    <a href="/page/onlineRetailers/printer/PBSquestion.html"><div class="ico_question"></div></a>
                </div>
            </li>
            <li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><label><span class="lable-fontStyle">QQ</span></label></div>
                    <div class="flex-con">
                    	<input  id="qq" type="text" name="" class="input-text" value="" placeholder="" />
                    </div>
                </div>
            </li>
            <!--<li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><label><span class="lable-fontStyle">微信号码</span></label></div>
                    <div class="flex-con">
                    	<input type="text" name="" class="input-text" value="" placeholder="" />
                    </div>
                </div>
            </li>-->
           </ul>
           
           <ul class="ui-fm grid-main">
    		<li class="item01 item-fm">
                <div class="ui-flex">
                    <div class="flex-ico"><span class="must2"></span><label><span class="lable-fontStyle">收货地址</span></label></div>
                    <!-- 
                    <div class="flex-con">
                    	<a class="ui-btn-right03" data-toggle="datePicker" href="javascript:void(0);" >                   		
                        	<div class="fill placeholder" >请选择地区</div>                         
                        </a>
                    </div>
                     -->
                    <div class="flex-con" onclick="toSelectDestination();">
                    	<a class="ui-btn-right03" data-toggle="datePicker" href="javascript:void(0);" onClick="toSelectDestination()">
                    	    <div class="fill placeholder" ><span id="destination" class="fill">请选择地区</span></div>
                        </a>
                            <input type="hidden" id="provinceName"/>
	                        <input type="hidden" id="provinceCode"/>
	                        <input type="hidden" id="cityName"/>
	                        <input type="hidden" id="cityCode"/>
	                        <input type="hidden" id="countyName"/>
	                        <input type="hidden" id="countyCode"/>
                    </div>
                </div>
            </li>
            <li class="item01 item-fm" >
                <div class="ui-flex">
                    <div class="flex-ico"><span class="must2"></span><label><span class="lable-fontStyle">详细地址</span></label></div>
                    <div class="flex-con">
                    	<textarea id="address" name="addres"  class="text-add" ></textarea>
                    </div>
                </div>
            </li>
            <!--<li style="margin:10px 0 80px 0">
                <div class="ui-agreement" id="agreementDiv">
        	<div class="div-lr-padding">
        		<span >
                    <p>
                    	<a href="javascript:void(0);" data-btn="yes-no" onClick="makeSureClick();checkNull();">
                    	<i class="ui-ico-sfi ico-box" id="makeSure"></i>
	        			 <i class="ui-ico-sfi ico-yes2" ></i>-->
	        			<!--</a>
						<span class="text-fontStyle text-margin-left-6">  我已阅读并同意</span>
                    	<a href="receive_rules.html">
	                    	<span class="text-fontStyle contract-color" >《活动规则》</span>
                    	</a>
                    </p>
                </span>
        	</div>
        </div>
            
            </li>-->
           </ul>
           
           
    	</section>
    	<div class="grid-btn">
    		
        	<a class="ui-btn btn-submit" href="javascript:void(0)" onclick="submitAdvancePaymentCus()">　提交　</a>
        </div>
    </form>
  </div>	
</body>
</html>

