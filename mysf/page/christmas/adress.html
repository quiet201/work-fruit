<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
<title>顺丰圣诞派好礼</title>
<link rel="stylesheet" href="css/public.css" />
<link rel="stylesheet" href="css/style.css" />
 <!-- <style type="text/css">
  	html,body,.bg-christmas,.bgimg{
  		height: 100%;background:#795547;
  	}
  </style>-->
</head>
<body style="background:#795547;">
<div class="bg-christmas"> <img src="images/bg-adress.jpg" class="bgimg"/>
  <div class="text-dz1" id="pName">奖品名称</div>
  <div class="text-dz2">请正确填写以下礼品寄送信息哟</div>
  <form action="" method="post">
  	<div class="box-input">
    <ul>
      <Li>
        <label>联系人</label>
        <input type="text" id="ph_client_name"/>
      </Li>
      <Li>
        <label>联系电话</label>
        <input type="tel" id="ph_client_phone"/>
      </Li>
      
       <Li>
        <label>所在公司</label>
        <input type="text" id="ph_client_company"/>
      </Li>
       <Li class="last-child c">
        <label>奖品寄送地址</label>
        <textarea class="txt-area" id="ph_client_send_address" maxlength="150" cols="30" rows="2" style="border:none;"></textarea>
      </Li>
    </ul>
  </div>

  </form>
  <a class="btn-adrees" id="adreesBtn">&nbsp;</a>


</div>
  <script type="text/javascript" src="js/jhope.min.js"></script>
  <script type="text/javascript">
		$(function(){
			var isMob = /^1[0-9]{10}$/;
			var dataT = JHope.Tool.getUrlParam(),
				data = {};
			if(!dataT || !dataT['pId'] || !dataT['pName'] || !dataT['cardNo']){
				$('body').alert({content:'非法参数跳转'});
				return ;
			}
			
			$('#pName').html(dataT['pName']);
			$('#adreesBtn').tap(function(e){
				var ph_client_name = $('#ph_client_name').val(),
					ph_client_phone = $('#ph_client_phone').val(),
					ph_client_company = $('#ph_client_company').val(),
					ph_client_send_address = $('#ph_client_send_address').val();
				
				if(!ph_client_name){
					$('body').alert({content:'请填写联系人'});
					return ;
				}
				
				if(ph_client_name.length>10){
					$('body').alert({content:'亲，你的大名过长'});
					return ;
				}
				
				if(!ph_client_phone){
					$('body').alert({content:'请填写联系电话'});
					return ;
				}
				
				if(!isMob.test(ph_client_phone)){
					$('body').alert({content:'请填写有效的电话'});
					return ;
				}
				
				if(!ph_client_company){
					$('body').alert({content:'请填写所在公司'});
					return ;
				}
				
				if(ph_client_company.length>50){
					$('body').alert({content:'亲，你的公司名过长'});
					return ;
				}
				
				if(!ph_client_send_address){
					$('body').alert({content:'请填写奖品寄送地址'});
					return ;
				}
				
				if(ph_client_send_address>150){
					$('body').alert({content:'亲，你的奖品寄送地址过长'});
					return ;
				}
				
				data['phc_card_no'] = dataT['cardNo'];
				data['ph_client_name'] = ph_client_name;
				data['ph_client_phone'] = ph_client_phone;
				data['ph_client_company'] = ph_client_company;
				data['ph_client_send_address'] = ph_client_send_address;
				if(data){
					$.ajax({
					  type: 'POST',
					  url: '/service/christmas/updatePrizeInfo',
					  data: data,
					  dataType: 'json',
					  contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
					  context: $('body'),
					  success: function(data){
						  if(data>0){
							  JHope.Tool.forwardHref('success.html',data);
						  }else{
							  $('body').alert({content:'更新联系信息失败'});
						  }
					  }
				  });
				}
			});
		});
	</script>
</body>
</html>